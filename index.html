<div style="max-width: 620px; margin: 40px auto; padding: 32px; background: #ffffff; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.07); font-family: 'Segoe UI', sans-serif; color: #1a1a1a;">

  <h2 style="text-align: center; font-size: 24px; font-weight: 700; margin-bottom: 30px; color: #5a52ff;">
    Signalez une coupure d’électricité dans votre ville
  </h2>

  <label for="ville" style="font-weight: 600; display: block; margin-bottom: 8px;">Votre ville</label>
  <input id="ville" type="text" placeholder="Ex. : Marseille" style="width: 100%; padding: 14px 16px; border: 1px solid #ccc; border-radius: 10px; font-size: 16px; margin-bottom: 28px; box-sizing: border-box;" autocomplete="off">

  <label style="font-weight: 600; display: block; margin-bottom: 12px;">Avez-vous eu une coupure ?</label>
  <div style="display: flex; gap: 20px; margin-bottom: 32px;">
    <label style="flex: 1; background: #f1f3ff; padding: 14px 16px; border-radius: 10px; text-align: center; cursor: pointer; border: 2px solid transparent; transition: border-color 0.2s;">
      <input type="radio" name="coupure" value="Oui" style="display: none;">
      <span style="font-weight: 600; color: #5a52ff;">Oui</span>
    </label>
    <label style="flex: 1; background: #f1f3ff; padding: 14px 16px; border-radius: 10px; text-align: center; cursor: pointer; border: 2px solid transparent; transition: border-color 0.2s;">
      <input type="radio" name="coupure" value="Non" style="display: none;">
      <span style="font-weight: 600; color: #0fc4b2;">Non</span>
    </label>
  </div>

  <button onclick="envoyerFormulaire()" style="width: 100%; padding: 16px; background: linear-gradient(to right, #5a52ff, #0fc4b2); color: white; border: none; border-radius: 12px; font-size: 17px; font-weight: bold; cursor: pointer; transition: background 0.3s ease;">
    Envoyer
  </button>

  <p id="confirmation" style="display: none; margin-top: 20px; color: #5a52ff; text-align: center; font-weight: 600;">Merci, votre réponse a bien été envoyée !</p>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-rJWgZwUxtjsLZ-w0VPOG2e4fVUmJGNA&libraries=places"></script>
  <script>
    let villeValide = "";

    window.onload = function () {
      const input = document.getElementById("ville");
      const autocomplete = new google.maps.places.Autocomplete(input, {
        types: ["(cities)"],
        componentRestrictions: { country: "fr" }
      });

      autocomplete.addListener("place_changed", function () {
        const place = autocomplete.getPlace();
        villeValide = place.name || "";
      });
    };

    const radios = document.querySelectorAll('input[name="coupure"]');
    const labels = document.querySelectorAll('label[style*="cursor: pointer"]');
    labels.forEach((label, i) => {
      label.onclick = () => {
        radios[i].checked = true;
        labels.forEach(l => l.style.borderColor = "transparent");
        label.style.borderColor = "#ffb81d";
      };
    });

    function envoyerFormulaire() {
      const villeInput = document.getElementById("ville").value;
      const coupure = document.querySelector('input[name="coupure"]:checked')?.value;

      if (!villeInput || !coupure || villeInput !== villeValide) {
        alert("Merci de sélectionner une ville valide parmi les suggestions et de répondre à la question.");
        return;
      }

      fetch("TON_URL_APPS_SCRIPT", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ ville: villeValide, coupure })
      });

      document.getElementById("ville").value = "";
      radios.forEach(r => r.checked = false);
      labels.forEach(l => l.style.borderColor = "transparent");
      document.getElementById("confirmation").style.display = "block";
    }
  </script>

</div>



